[mysqld]

# *******
# general
skip-external-locking
sql-mode="STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"
# mode ONLY_FULL_GROUP_BY is enabled by default in mysql 5.7 and is not compatible with doctrine

# *******
# charset
collation-server = utf8mb4_general_ci
character-set-server = utf8mb4

# *******
# network
bind-address    = 0.0.0.0
port            = 3306
wait_timeout    = 60
max_connections = 100
skip_name_resolve

# ******
# global
max_allowed_packet      = 67108864
table_open_cache        = 16384
sort_buffer_size        = 1048576
read_buffer_size        = 1048576
read_rnd_buffer_size    = 4194304
thread_stack            = 131072
thread_cache_size       = 8
tmp_table_size          = 2684354560
max_heap_table_size     = 2684354560
join_buffer_size        = 2097152
low_priority_updates    = 1
concurrent_insert       = 2
transaction_isolation   = READ-COMMITTED
read_only               = OFF

lock_wait_timeout       = 31536000

# ******
# myisam
key_buffer_size         = 64M
myisam_sort_buffer_size = 67108864
myisam_repair_threads   = 1

# **
# QC
query_alloc_block_size      = 8192
query_cache_limit           = 2097152
query_cache_min_res_unit    = 4096
query_cache_size            = 100663296
query_cache_type            = 1
query_prealloc_size         = 8192

# ******
# innodb
innodb_file_per_table
innodb_buffer_pool_size         = 2983M
# innodb_additional_mem_pool_size = 64M removed in mysql 5.7
innodb_thread_concurrency       = 16
innodb_flush_log_at_trx_commit  = 2
innodb_lock_wait_timeout        = 400
innodb_log_file_size            = 64M
innodb_log_buffer_size          = 8M
innodb_flush_method             = O_DIRECT
innodb_data_file_path           = ibdata1:64M:autoextend
innodb_adaptive_flushing        = ON
# only percona
#innodb_adaptive_hash_index_partitions   = 1



# logs
slow_query_log                = 1
long_query_time               = 2
log_queries_not_using_indexes = 0
log-slow-admin-statements     = 1
